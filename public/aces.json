{
  "$schema": "../schemas/aces.schema.json",

  "authentication": {
    "actions": [{
      "id": "log_in-anonymously",
      "scriptName": "LogInAnonymously",
      "params": [{
        "id": "username",
        "type": "string"
      }],
      "highlight": true,
      "isAsync": true
    }],
    "conditions": [
      {
        "id": "is-user-logged_in",
        "scriptName": "IsUserLoggedIn",
        "highlight": true
      },
      {
        "id": "user-login-trigger",
        "scriptName": "TriggerOnUserLogin",
        "highlight": true,
        "isTrigger": true
      },

      {
        "id": "is-user-new",
        "scriptName": "IsNewUser"
      },

      {
        "id": "is-user-anonymous",
        "scriptName": "IsUserAnonymous"
      }
    ]
  },
  "error-handling": {
    "conditions": [
      {
        "id": "error-any-trigger",
        "scriptName": "TriggerOnError",
        "highlight": true,
        "isTrigger": true
      },
      {
        "id": "error-specific-trigger",
        "scriptName": "TriggerOnError",
        "params": [{
          "id": "code",
          "type": "string"
        }],
        "isTrigger": true
      }
    ],
    "expressions": [
      {
        "id": "error-code",
        "expressionName": "ErrorCode",
        "highlight": true,
        "returnType": "string"
      },

      {
        "id": "error_type-unknown",
        "expressionName": "XError_Unknown",
        "returnType": "string"
      },
      {
        "id": "error_type-implementation",
        "expressionName": "XError_Implementation",
        "returnType": "string"
      },

      {
        "id": "error_type-not_initialized",
        "expressionName": "XError_NotInitialized",
        "returnType": "string"
      },
      {
        "id": "error_type-already_initialized",
        "expressionName": "XError_AlreadyInitialized",
        "returnType": "string"
      },

      {
        "id": "error_type-missing_configuration",
        "expressionName": "XError_MissingConfiguration",
        "returnType": "string"
      },

      {
        "id": "error_type-network",
        "expressionName": "XError_NetworkError",
        "returnType": "string"
      },
      {
        "id": "error_type-request",
        "expressionName": "XError_RequestError",
        "returnType": "string"
      },
      {
        "id": "error_type-timeout",
        "expressionName": "XError_TimeoutError",
        "returnType": "string"
      },

      {
        "id": "error_type-not_authenticated",
        "expressionName": "XError_NotAuthenticated",
        "returnType": "string"
      },
      {
        "id": "error_type-not_authorized",
        "expressionName": "XError_NotAuthorized",
        "returnType": "string"
      },

      {
        "id": "error_type-user_not_found",
        "expressionName": "XError_UserNotFound",
        "returnType": "string"
      },
      {
        "id": "error_type-user_already_exists",
        "expressionName": "XError_UserAlreadyExists",
        "returnType": "string"
      }
    ]
  },
  "log-events": {
    "actions": [
      {
        "id": "log-event",
        "scriptName": "LogEvent",
        "highlight": true,
        "params": [{
          "id": "type",
          "type": "string"
        }]
      },
      {
        "id": "log-event-payload",
        "scriptName": "LogEvent",
        "params": [
          {
            "id": "type",
            "type": "string"
          },
          {
            "id": "payload",
            "type": "object",
            "allowedPluginIds": ["Json"]
          },
          {
            "id": "empty",
            "type": "boolean",
            "defaultValue": false
          }
        ]
      }
    ]
  },
  "management": {
    "actions": [{
      "id": "initialize",
      "scriptName": "Initialize",
      "highlight": true,
      "isAsync": true
    }],
    "conditions": [
      {
        "id": "is-initialized",
        "scriptName": "IsInitialized",
        "highlight": true
      },
      {
        "id": "initialized-trigger",
        "scriptName": "TriggerOnInitialized",
        "highlight": true,
        "isTrigger": true
      },

      {
        "id": "is-device-new",
        "scriptName": "IsNewDevice"
      }
    ]
  }
}
